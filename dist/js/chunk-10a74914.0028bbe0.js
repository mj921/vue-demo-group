(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10a74914"],{1276:function(e,t,r){"use strict";var i=r("d784"),n=r("44e7"),a=r("825a"),s=r("1d80"),c=r("4840"),o=r("8aa5"),u=r("50c4"),l=r("14c3"),f=r("9263"),p=r("d039"),d=[].push,h=Math.min,v=4294967295,g=!p((function(){return!RegExp(v,"y")}));i("split",2,(function(e,t,r){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var i=String(s(this)),a=void 0===r?v:r>>>0;if(0===a)return[];if(void 0===e)return[i];if(!n(e))return t.call(i,e,a);var c,o,u,l=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),h=0,g=new RegExp(e.source,p+"g");while(c=f.call(g,i)){if(o=g.lastIndex,o>h&&(l.push(i.slice(h,c.index)),c.length>1&&c.index<i.length&&d.apply(l,c.slice(1)),u=c[0].length,h=o,l.length>=a))break;g.lastIndex===c.index&&g.lastIndex++}return h===i.length?!u&&g.test("")||l.push(""):l.push(i.slice(h)),l.length>a?l.slice(0,a):l}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var n=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n,r):i.call(String(n),t,r)},function(e,n){var s=r(i,e,this,n,i!==t);if(s.done)return s.value;var f=a(e),p=String(this),d=c(f,RegExp),m=f.unicode,y=(f.ignoreCase?"i":"")+(f.multiline?"m":"")+(f.unicode?"u":"")+(g?"y":"g"),E=new d(g?f:"^(?:"+f.source+")",y),T=void 0===n?v:n>>>0;if(0===T)return[];if(0===p.length)return null===l(E,p)?[p]:[];var b=0,k=0,R=[];while(k<p.length){E.lastIndex=g?k:0;var _,O=l(E,g?p:p.slice(k));if(null===O||(_=h(u(E.lastIndex+(g?0:k)),p.length))===b)k=o(p,k,m);else{if(R.push(p.slice(b,k)),R.length===T)return R;for(var x=1;x<=O.length-1;x++)if(R.push(O[x]),R.length===T)return R;k=b=_}}return R.push(p.slice(b)),R}]}),!g)},"159b":function(e,t,r){var i=r("da84"),n=r("fdbc"),a=r("17c2"),s=r("9112");for(var c in n){var o=i[c],u=o&&o.prototype;if(u&&u.forEach!==a)try{s(u,"forEach",a)}catch(l){u.forEach=a}}},"17c2":function(e,t,r){"use strict";var i=r("b727").forEach,n=r("a640"),a=n("forEach");e.exports=a?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"1bed":function(e,t,r){},"1cc4":function(e,t,r){"use strict";r("308b")},"1dd1":function(e,t,r){"use strict";r("e997")},2532:function(e,t,r){"use strict";var i=r("23e7"),n=r("5a34"),a=r("1d80"),s=r("ab13");i({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(a(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(e,t,r){"use strict";var i=r("6eeb"),n=r("825a"),a=r("d039"),s=r("ad6d"),c="toString",o=RegExp.prototype,u=o[c],l=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),f=u.name!=c;(l||f)&&i(RegExp.prototype,c,(function(){var e=n(this),t=String(e.source),r=e.flags,i=String(void 0===r&&e instanceof RegExp&&!("flags"in o)?s.call(e):r);return"/"+t+"/"+i}),{unsafe:!0})},"308b":function(e,t,r){},4403:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["menu"===e.scene?r("game-menu",{on:{start:e.start}}):e._e(),"game"===e.scene?r("game-main",{on:{backMenu:e.backMenu}}):e._e(),r("button",{on:{click:e.add}},[e._v("add")])],1)},n=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game-main"},[r("div",{staticClass:"cave-info"},[r("span",[e._v(e._s(e.cave))]),r("el-switch",{attrs:{disabled:"selectOption"!==e.status},on:{change:e.showSkillOptions},model:{value:e.testFlag,callback:function(t){e.testFlag=t},expression:"testFlag"}},[e._v("测试 ")]),r("span",[e._v(e._s((e.time/1e3).toFixed(2)))])],1),r("div",{staticClass:"info"},[r("dl",[r("label",{attrs:{for:""}},[e._v("攻击")]),r("span",[e._v(e._s("battle"===e.status?e.enemy.currProps.atk:e.enemy.atk))])]),r("dl",[r("label",{attrs:{for:""}},[e._v("暴击")]),r("span",[e._v(e._s("battle"===e.status?e.enemy.currProps.cir:e.enemy.cir))])]),r("dl",[r("label",{attrs:{for:""}},[e._v("闪避")]),r("span",[e._v(" "+e._s("battle"===e.status?e.enemy.currProps.dodge:e.enemy.dodge)+" ")])]),r("num-disappear",{ref:"enemyNumDisappear"})],1),r("hp-bar",{attrs:{curr:e.enemy&&e.enemy.currProps&&e.enemy.currProps.hp||0,max:e.enemy&&e.enemy.currProps&&e.enemy.currProps.maxHp||0}}),r("skill-options",{attrs:{skills:e.skillOptions},on:{select:e.selectSkill},model:{value:e.skillOptionVisible,callback:function(t){e.skillOptionVisible=t},expression:"skillOptionVisible"}}),r("el-button",{directives:[{name:"show",rawName:"v-show",value:"waitBattle"===e.status,expression:"status === 'waitBattle'"}],attrs:{type:"primary",size:"default"},on:{click:e.createBattlefield}},[e._v(" 战斗 ")]),r("div",{staticClass:"info"},[r("dl",[r("label",{attrs:{for:""}},[e._v("攻击")]),r("span",[e._v(" "+e._s("battle"===e.status?e.player.currProps.atk:e.player.atk)+" ")])]),r("dl",[r("label",{attrs:{for:""}},[e._v("暴击")]),r("span",[e._v(" "+e._s("battle"===e.status?e.player.currProps.cir:e.player.cir)+" ")])]),r("dl",[r("label",{attrs:{for:""}},[e._v("闪避")]),r("span",[e._v(" "+e._s("battle"===e.status?e.player.currProps.dodge:e.player.dodge)+" ")])]),r("num-disappear",{ref:"playerNumDisappear"})],1),r("hp-bar",{attrs:{curr:e.player&&e.player.currProps&&e.player.currProps.hp||e.player.hp||0,max:e.player&&e.player.currProps&&e.player.currProps.maxHp||e.player.hp||0}}),r("el-button",{attrs:{type:"primary",size:"default"},on:{click:e.backMenu}},[e._v(" 菜单 ")])],1)},s=[],c=r("5530"),o=r("d4ec"),u=r("bee2"),l=(r("b0c0"),r("6062"),r("d3b7"),r("3ca3"),r("ddb0"),r("159b"),r("1276"),r("ac1f"),r("a434"),r("4de4"),r("caad"),r("2532"),r("99af"),{GET_TRIGGER:1,BATTLE_TRIGGER:2,BATTLE_WIN_TRIGGER:3}),f={OBTAIN:1,TIME_ONCE:2,TIME_INTERVAL:3,UNDER_ATTACK:4,UNDER_DAMAGE:5},p={PROP:1,DAMAGE:2,PROBABILITY_DAMAGE:3,RESTORE_HP:4,PROBABILITY_RESTORE_HP:5,CONDITION_RESTORE_HP:6,REDUCTION_DAMAGE:7,PROBABILITY_REDUCTION_DAMAGE:8},d={FIXED_VALUE:1,PERCENTAGE:2},h={SELF:1,ENEMY:2},v=[{id:1,name:"",skillType:l.GET_TRIGGER,effects:[{triggerType:f.OBTAIN,effectType:p.PROP,targetType:h.SELF,valueType:d.FIXED_VALUE,propKey:"atk",propNum:3,propType:h.SELF}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e;return"增加".concat(t*this.effects[0].propNum,"攻击力")}},{id:2,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.TIME_ONCE,effectType:p.PROP,targetType:h.SELF,valueType:d.FIXED_VALUE,propKey:"atk",propNum:6,triggerTime:0},{triggerType:f.TIME_ONCE,effectType:p.PROP,targetType:h.SELF,valueType:d.FIXED_VALUE,propKey:"atk",propNum:-6,triggerTime:2e3}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e;return"战斗开始2秒内增加".concat(t*this.effects[0].propNum,"攻击力")}},{id:3,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.TIME_INTERVAL,effectType:p.PROP,targetType:h.SELF,valueType:d.FIXED_VALUE,propKey:"atk",propNum:1,intervalTime:1e3}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e;return"每秒增加".concat(t*this.effects[0].propNum,"攻击力")}},{id:4,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.UNDER_ATTACK,effectType:p.PROBABILITY_DAMAGE,targetType:h.ENEMY,valueType:d.FIXED_VALUE,damage:7,probability:30}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0],i=r.probability,n=r.damage;return"受到攻击时".concat(i,"%概率造成").concat(t*n,"点伤害")}},{id:5,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.UNDER_ATTACK,effectType:p.PROBABILITY_REDUCTION_DAMAGE,targetType:h.SELF,valueType:d.FIXED_VALUE,reductionDamage:3,probability:30}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0],i=r.probability,n=r.reductionDamage;return"受到攻击时".concat(i,"%概率减免").concat(t*n,"点伤害")}},{id:6,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.TIME_INTERVAL,effectType:p.RESTORE_HP,targetType:h.SELF,valueType:d.FIXED_VALUE,restoreHp:30,intervalTime:1e3}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0].restoreHp;return"每秒回复".concat(t*r,"点生命值")}},{id:7,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.TIME_INTERVAL,effectType:p.CONDITION_RESTORE_HP,targetType:h.SELF,valueType:d.FIXED_VALUE,restoreHp:42,intervalTime:1e3,condition:"(hp/maxHp)>0.5"}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0].restoreHp;return"当生命值大于50%时，每秒回复".concat(t*r,"点生命值")}},{id:8,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.TIME_INTERVAL,effectType:p.RESTORE_HP,targetType:h.SELF,valueType:d.PERCENTAGE,percentageProp:"maxHp",restoreHp:1,intervalTime:1e3}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0].restoreHp;return"每秒回复".concat(r*t,"%最大生命值")}},{id:9,name:"",skillType:l.BATTLE_TRIGGER,effects:[{triggerType:f.OBTAIN,effectType:p.PROP,targetType:h.SELF,valueType:d.PERCENTAGE,propKey:"hp",percentageProp:"hp_T",propNum:10}],maxLv:0,desc:function(){var e=this.lv,t=void 0===e?1:e,r=this.effects[0].propNum;return"战斗开始增加".concat(r*t,"%最大生命值")}}],g=(r("a15b"),r("4d63"),r("25f0"),r("466d"),function(e){for(var t=[],r=[],i=0,n=0;i<e.length;i++){var a=e[i],s=void 0,c=void 0;switch(a){case"(":n=i+1,s=[],r.push(s),t.push(s);break;case"|":case"&":case"+":case"-":case"*":case"/":case"=":case"<":case">":c=e.substring(n,i),"="===e[i+1]?(n=i+2,a+="="):n=i+1,r.length>0?(c.length>0&&r[r.length-1].push(c),r[r.length-1].push(a)):(c.length>0&&t.push(c),t.push(a));break;case")":c=e.substring(n,i),r[r.length-1].push(c),n=i+1,r.pop();break}}return n<i&&t.push(e.substring(n,i)),t}),m=function e(t,r){if(3===r.length&&r.every((function(e){return"string"===typeof e})))return y(t,r.join(""));var i=!1;i=r[0]instanceof Array?e(t,r[0]):y(t,r[0]);for(var n=2;n<r.length;n+=2){var a=r[n],s=!1;s=a instanceof Array?e(t,a):y(t,a),i=y(t,"".concat(i).concat(r[n-1]).concat(s))}return i},y=function(e,t){var r=/(?:[?!=+*/-]|[><]=?)/,i=new RegExp("^(".concat(k.PropKeyList.join("|"),")$"));if(!r.test(t))return/^-?\d+(\.\d+)?$/.test(t)?+t:!!i.test(t)&&e[t];var n=t.split(r),a=t.match(r)[0],s=i.test(n[0])?e[n[0]]:+n[0],c=i.test(n[1])?e[n[1]]:+n[1];switch(a){case">":return s>c;case"<":return s<c;case">=":return s>=c;case"<=":return s<=c;case"=":return s===c;case"+":return s+c;case"-":return s-c;case"*":return s*c;case"/":return 0===c?0:s/c;case"&":return s&&c;case"|":return s||c}return!1},E=function(){function e(){Object(o["a"])(this,e),this.listeners={}}return Object(u["a"])(e,[{key:"emit",value:function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){e(t)}))}},{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}}]),e}(),T=E,b=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,i=void 0===r?"":r,n=t.hp,a=void 0===n?900:n,s=t.atk,c=void 0===s?9:s,u=t.cir,l=void 0===u?0:u,f=t.dodge,p=void 0===f?0:f,d=t.cirRate,h=void 0===d?200:d,v=t.atkSpeed,g=void 0===v?100:v;Object(o["a"])(this,e),this.name=i,this.hp=a,this.atk=c,this.cir=l,this.dodge=p,this.cirRate=h,this.atkSpeed=g,this.skills={},this.battleStartSkillIds=new Set,this.battleWinSkillIds=new Set,this.excludeSkillIds=[],this.currProps={},this.gameEvent=new T}return Object(u["a"])(e,[{key:"dealBattleStartEffectTrigger",value:function(e,t,r){switch(e.targetType){case h.SELF:r[e.propKey]+=this.getEffectValue(e.valueType,e.propNum*t,e.percentageProp);break}}},{key:"dealBattleSkills",value:function(e,t){var r=this,i=e.lv,n=e.effects,a=e.id;n.forEach((function(e){var n=e.triggerType,s=e.condition,o={};switch(n){case f.OBTAIN:r.dealBattleStartEffectTrigger(e,i,t);break;case f.TIME_ONCE:o=Object(c["a"])(Object(c["a"])({},e),{},{lv:i,skillId:a}),s&&(o.condition=g(s)),t.onceEffects.push(o);break;case f.TIME_INTERVAL:o=Object(c["a"])(Object(c["a"])({},e),{},{lv:i,timeProcess:0,skillId:a}),s&&(o.condition=g(s)),t.intervalEffects.push(o);break;case f.UNDER_ATTACK:o=Object(c["a"])(Object(c["a"])({},e),{},{lv:i,skillId:a}),s&&(o.condition=g(s)),t.underAttackEffects.push(o);break}}))}},{key:"createBattleProps",value:function(){var e=this,t={hp:this.hp,atk:this.atk,cir:this.cir,dodge:this.dodge,cirRate:this.cirRate,atkSpeed:this.atkSpeed,onceEffects:[],intervalEffects:[],underAttackEffects:[]};this.battleStartSkillIds.forEach((function(r){var i=e.skills[r];e.dealBattleSkills(i,t)})),this.currProps={hp:t.hp,maxHp:t.hp,atk:t.atk,cir:t.cir,dodge:t.dodge,cirRate:t.cirRate,atkSpeed:t.atkSpeed,onceEffects:t.onceEffects,intervalEffects:t.intervalEffects,underAttackEffects:t.underAttackEffects,atkProcess:0,recordList:[]}}},{key:"getAtkNum",value:function(e){var t=e/(1e4/this.currProps.atkSpeed);this.currProps.atkProcess+=t;var r=Math.floor(this.currProps.atkProcess);return this.currProps.atkProcess-=r,r}},{key:"triggerPropEffect",value:function(e,t){switch(t.targetType){case h.SELF:this.currProps[t.propKey]+=this.getEffectValue(t.valueType,t.propNum*t.lv,t.percentageProp);break;case h.ENEMY:e.currProps[t.propKey]+=this.getEffectValue(t.valueType,t.propNum*t.lv,t.percentageProp);break}}},{key:"getCurrProp",value:function(e){var t=e.split("_");return"T"===t[1]?this[t[0]]:t[1]?void 0:this.currProps[e]}},{key:"getEffectValue",value:function(e,t,r){switch(e){case d.FIXED_VALUE:return t;case d.PERCENTAGE:return Math.floor(t/100*this.getCurrProp(r))}}},{key:"restoreHp",value:function(t){var r=t.restoreHp,i=void 0===r?0:r,n=t.lv,a=void 0===n?1:n,s=t.valueType,c=void 0===s?d.FIXED_VALUE:s,o=t.percentageProp,u=void 0===o?"maxHp":o,l=this.getEffectValue(c,i*a,u);this.addBattleRecord({recordType:e.RecordType.RESTORE_HP,restoreHp:l}),this.currProps.hp=Math.min(this.currProps.maxHp,this.currProps.hp+l)}},{key:"dealEffectTrigger",value:function(e,t){switch(e.effectType){case p.PROP:this.triggerPropEffect(t,e);break;case p.RESTORE_HP:this.restoreHp(e);break;case p.CONDITION_RESTORE_HP:m(this.currProps,e.condition)&&this.restoreHp(e.restoreHp*e.lv);break}}},{key:"triggerEffect",value:function(e,t,r){for(var i=this,n=0;n<this.currProps.onceEffects.length;){var a=this.currProps.onceEffects[n];a.triggerTime<=t?(this.dealEffectTrigger(a,e),this.currProps.onceEffects.splice(n,1)):n++}this.currProps.intervalEffects.forEach((function(t){t.timeProcess+=r,t.intervalTime<=t.timeProcess&&(i.dealEffectTrigger(t,e),t.timeProcess-=t.intervalTime)}))}},{key:"underAttackHandle",value:function(){var e=[],t=0;return this.currProps.underAttackEffects.forEach((function(r){var i=r.effectType,n=r.damage,a=r.lv,s=r.probability,c=r.reductionDamage,o=r.skillId;switch(i){case p.DAMAGE:e.push({damage:n*a,skillId:o});break;case p.PROBABILITY_DAMAGE:100*Math.random()<s&&e.push({damage:n*a,skillId:o});break;case p.REDUCTION_DAMAGE:t+=c*a;break;case p.PROBABILITY_REDUCTION_DAMAGE:100*Math.random()<s&&(t+=c*a);break}})),{damages:e,reductionDamageTotal:t}}},{key:"addBattleRecord",value:function(t){t.numStr=t.recordType===e.RecordType.DAMAGE?"-".concat(t.damage):"+".concat(t.restoreHp),this.currProps.recordList.push(t),this.gameEvent.emit("record",t)}},{key:"on",value:function(e,t){this.gameEvent.on(e,t)}},{key:"attack",value:function(t){var r=this,i=t.underAttackHandle(this),n=i.damages,a=i.reductionDamageTotal,s=this.currProps.atk,c=this.currProps.cir-t.currProps.cir;if(c>100*Math.random()){var o=this.currProps.cirRate+Math.max(c-100,0);s*=o/100}s=Math.max(0,s-a);var u=t.currProps.dodge-this.currProps.dodge;if(Math.min(u,80)<100*Math.random()){var l=Math.max(u-80,0);s=Math.max(Math.floor(s*(100-l)/100),0)}t.addBattleRecord({recordType:e.RecordType.DAMAGE,damageType:e.DamageType.ATTACK,damage:s}),t.currProps.hp-=s,n.forEach((function(e){t.causeDamage(r,e)}))}},{key:"causeDamage",value:function(t,r){var i=r.damage,n=0;i=Math.max(Math.floor(i*(100-n)/100),0),t.addBattleRecord({recordType:e.RecordType.DAMAGE,damageType:e.DamageType.SKILL,damage:i,skillId:r.skillId}),t.currProps.hp-=i}},{key:"obtainSkill",value:function(e){var t=this;if(this.skills[e.id])this.skills[e.id].lv++;else{var r=JSON.parse(JSON.stringify(e));r.lv=1,r.desc=e.desc,this.skills[e.id]=r}0!==this.skills[e.id].maxLv&&this.skills[e.id].lv>=this.skills[e.id].maxLv&&this.excludeSkillIds.push(e.id),e.skillType===l.GET_TRIGGER?e.effects.forEach((function(e){switch(e.triggerType){case f.OBTAIN:t[e.propKey]+=e.propNum;break}})):e.skillType===l.BATTLE_TRIGGER&&this.battleStartSkillIds.add(e.id)}},{key:"getSkill",value:function(){var e=this,t=v.filter((function(t){return!e.excludeSkillIds.includes(t.id)}));if(!t.length)return null;this.obtainSkill(t[Math.floor(Math.random()*t.length)])}},{key:"getSkillOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)return v;for(var i=v.filter((function(t){return!e.excludeSkillIds.includes(t.id)})),n=[],a=0;a<t;a++){var s=Math.floor(Math.random()*i.length);n.push(i[s]),i.splice(s,1)}return n}}]),e}();b.create=function(e){for(var t=new b,r=0;r<e;r++)t.getSkill();return t},b.RecordType={DAMAGE:1,RESTORE_HP:2},b.DamageType={ATTACK:1,SKILL:2},b.PropKeyList=["hp","maxHp","atk","cir","dodge","cirRate","atkSpeed"];var k=b,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"hp-bar"},[r("div",{staticClass:"hp-bar-curr",style:{width:e.rate+"%"}}),r("div",{staticClass:"hp-bar-text"},[r("span",{staticClass:"hp-bar-text-curr"},[e._v(e._s(e.curr))]),r("span",{staticClass:"hp-bar-text-split"},[e._v("/")]),r("span",{staticClass:"hp-bar-text-max"},[e._v(e._s(e.max))])])])},_=[],O=(r("a9e3"),{name:"HpBar",props:{curr:{type:Number,default:0},max:{type:Number,default:0}},computed:{rate:function(){return Math.min(this.max?this.curr/this.max*100:0,100)}}}),x=O,I=(r("cc5e"),r("2877")),A=Object(I["a"])(x,R,_,!1,null,"2dfd509e",null),P=A.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"num-disappear"},[r("transition-group",{attrs:{name:"disappear"},on:{leave:e.leave}},e._l(e.numList,(function(t){return r("dl",{key:t.id,staticClass:"num",style:{transform:"translateX(calc("+t.startOffset+"px - 50%))",color:t.color},attrs:{"data-startOffset":t.startOffset,"data-endOffset":t.endOffset}},[e._v(" "+e._s(t.num)+" ")])})),0)],1)},N=[],L={name:"NumDisappear",data:function(){return{numList:[],id:1}},methods:{addNum:function(e){var t=this,r=e.num,i=e.color,n={num:r,color:i,id:this.id++,startOffset:25-Math.floor(50*Math.random()),endOffset:50-Math.floor(100*Math.random())};n.sto=setTimeout((function(){var e=t.numList.indexOf(n);e>-1&&t.numList.splice(e,1)})),this.numList.push(n)},leave:function(e,t){e.style.bottom="calc(100% - 1em)",e.style.opacity="0",e.style.transform="translateX(calc(".concat(e.dataset.startOffset+e.dataset.endOffset,"px - 50%))"),setTimeout((function(){t()}),3e3)}}},w=L,D=(r("1cc4"),Object(I["a"])(w,S,N,!1,null,"3748eff8",null)),M=D.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"skill-options"},e._l(e.skills,(function(t){return r("dl",{key:"skillOption-"+t.id,staticClass:"skill-option",on:{click:function(r){return e.selectSkill(t)}}},[e._v(" "+e._s(t.desc())+" ")])})),0)},B=[],C={name:"SkillOptions",props:{value:{type:Boolean,default:!1},skills:{type:Array,default:function(){return[]}}},computed:{visible:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},methods:{selectSkill:function(e){this.$emit("select",e),this.visible=!1}}},j=C,F=(r("1dd1"),Object(I["a"])(j,G,B,!1,null,"1526bdd2",null)),H=F.exports,V={components:{HpBar:P,SkillOptions:H,NumDisappear:M},name:"GameMain",data:function(){return{cave:1,time:0,player:new k,enemy:null,skillOptions:[],skillOptionVisible:!1,status:"selectOption",loopTime:50,sto:null,testFlag:!1}},methods:{caveReset:function(){this.showSkillOptions(),this.cave++,this.time=0},createEnemy:function(){var e=this;this.enemy=k.create(1),this.enemy.on("record",(function(t){e.$refs.enemyNumDisappear.addNum({num:t.numStr,color:t.recordType===k.RecordType.DAMAGE?"blue":"green"})}))},createBattlefield:function(){var e=this;this.player.createBattleProps(this.enemy),this.enemy.createBattleProps(this.player),this.status="battle";var t=this.effectLoop();t||(this.sto=setTimeout((function(){e.loop()}),this.loopTime))},showSkillOptions:function(){this.status="selectOption",this.skillOptions=this.player.getSkillOptions(3,this.testFlag),this.skillOptionVisible=!0},selectSkill:function(e){this.skillOptions=[],this.player.obtainSkill(e),this.status="waitBattle"},effectLoop:function(){return this.player.triggerEffect(this.enemy,this.time,this.loopTime),this.enemy.currProps.hp<=0?(this.caveReset(),"win"):(this.enemy.triggerEffect(this.player,this.time,this.loopTime),this.player.currProps.hp<=0?"lose":void 0)},loop:function(){var e,t=this,r=new Date;this.time+=this.loopTime;var i=this.effectLoop();if(!i){var n=this.player.getAtkNum(this.loopTime);for(e=0;e<n;e++)this.player.attack(this.enemy);if(this.enemy.currProps.hp<=0)this.caveReset();else{var a=this.enemy.getAtkNum(this.loopTime);for(e=0;e<a;e++)this.enemy.attack(this.player);this.player.currProps.hp<=0||(this.sto=setTimeout((function(){t.loop()}),Math.max(this.loopTime-(new Date-r),0)))}}},backMenu:function(){this.$emit("backMenu")}},created:function(){this.createEnemy(),this.showSkillOptions()},mounted:function(){var e=this;this.player.on("record",(function(t){e.$refs.playerNumDisappear.addNum({num:t.numStr,color:t.recordType===k.RecordType.DAMAGE?"blue":"green"})}))}},U=V,K=(r("5542"),Object(I["a"])(U,a,s,!1,null,"9d94595e",null)),X=K.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("button",{on:{click:e.start}},[e._v("开始")])])},z=[],Y={name:"GameMenu",methods:{start:function(){this.$emit("start")}}},J=Y,W=Object(I["a"])(J,$,z,!1,null,"3e86a9fe",null),Q=W.exports,q={components:{GameMain:X,GameMenu:Q},name:"Roguelike",data:function(){return{scene:"menu"}},methods:{start:function(){this.scene="game"},backMenu:function(){this.scene="menu"},add:function(){var e="(hp/maxHp)<0.5";console.log(g(e)),console.log(m({hp:20,maxHp:50},g(e)))}}},Z=q,ee=Object(I["a"])(Z,i,n,!1,null,"3ec33287",null);t["default"]=ee.exports},"44e7":function(e,t,r){var i=r("861d"),n=r("c6b6"),a=r("b622"),s=a("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==n(e))}},"466d":function(e,t,r){"use strict";var i=r("d784"),n=r("825a"),a=r("50c4"),s=r("1d80"),c=r("8aa5"),o=r("14c3");i("match",1,(function(e,t,r){return[function(t){var r=s(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,r):new RegExp(t)[e](String(r))},function(e){var i=r(t,e,this);if(i.done)return i.value;var s=n(e),u=String(this);if(!s.global)return o(s,u);var l=s.unicode;s.lastIndex=0;var f,p=[],d=0;while(null!==(f=o(s,u))){var h=String(f[0]);p[d]=h,""===h&&(s.lastIndex=c(u,a(s.lastIndex),l)),d++}return 0===d?null:p}]}))},"4d63":function(e,t,r){var i=r("83ab"),n=r("da84"),a=r("94ca"),s=r("7156"),c=r("9bf2").f,o=r("241c").f,u=r("44e7"),l=r("ad6d"),f=r("9f7f"),p=r("6eeb"),d=r("d039"),h=r("69f3").set,v=r("2626"),g=r("b622"),m=g("match"),y=n.RegExp,E=y.prototype,T=/a/g,b=/a/g,k=new y(T)!==T,R=f.UNSUPPORTED_Y,_=i&&a("RegExp",!k||R||d((function(){return b[m]=!1,y(T)!=T||y(b)==b||"/a/i"!=y(T,"i")})));if(_){var O=function(e,t){var r,i=this instanceof O,n=u(e),a=void 0===t;if(!i&&n&&e.constructor===O&&a)return e;k?n&&!a&&(e=e.source):e instanceof O&&(a&&(t=l.call(e)),e=e.source),R&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var c=s(k?new y(e,t):y(e,t),i?this:E,O);return R&&r&&h(c,{sticky:r}),c},x=function(e){e in O||c(O,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},I=o(y),A=0;while(I.length>A)x(I[A++]);E.constructor=O,O.prototype=E,p(n,"RegExp",O)}v("RegExp")},"4de4":function(e,t,r){"use strict";var i=r("23e7"),n=r("b727").filter,a=r("1dde"),s=a("filter");i({target:"Array",proto:!0,forced:!s},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},5542:function(e,t,r){"use strict";r("1bed")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var i=r("1d80"),n=r("5899"),a="["+n+"]",s=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),o=function(e){return function(t){var r=String(i(t));return 1&e&&(r=r.replace(s,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:o(1),end:o(2),trim:o(3)}},"5a34":function(e,t,r){var i=r("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},6062:function(e,t,r){"use strict";var i=r("6d61"),n=r("6566");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n)},6566:function(e,t,r){"use strict";var i=r("9bf2").f,n=r("7c73"),a=r("e2cc"),s=r("0366"),c=r("19aa"),o=r("2266"),u=r("7dd0"),l=r("2626"),f=r("83ab"),p=r("f183").fastKey,d=r("69f3"),h=d.set,v=d.getterFor;e.exports={getConstructor:function(e,t,r,u){var l=e((function(e,i){c(e,l,t),h(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),f||(e.size=0),void 0!=i&&o(i,e[u],{that:e,AS_ENTRIES:r})})),d=v(t),g=function(e,t,r){var i,n,a=d(e),s=m(e,t);return s?s.value=r:(a.last=s={index:n=p(t,!0),key:t,value:r,previous:i=a.last,next:void 0,removed:!1},a.first||(a.first=s),i&&(i.next=s),f?a.size++:e.size++,"F"!==n&&(a.index[n]=s)),e},m=function(e,t){var r,i=d(e),n=p(t);if("F"!==n)return i.index[n];for(r=i.first;r;r=r.next)if(r.key==t)return r};return a(l.prototype,{clear:function(){var e=this,t=d(e),r=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete r[i.index],i=i.next;t.first=t.last=void 0,f?t.size=0:e.size=0},delete:function(e){var t=this,r=d(t),i=m(t,e);if(i){var n=i.next,a=i.previous;delete r.index[i.index],i.removed=!0,a&&(a.next=n),n&&(n.previous=a),r.first==i&&(r.first=n),r.last==i&&(r.last=a),f?r.size--:t.size--}return!!i},forEach:function(e){var t,r=d(this),i=s(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),a(l.prototype,r?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return g(this,0===e?0:e,t)}}:{add:function(e){return g(this,e=0===e?0:e,e)}}),f&&i(l.prototype,"size",{get:function(){return d(this).size}}),l},setStrong:function(e,t,r){var i=t+" Iterator",n=v(t),a=v(i);u(e,t,(function(e,t){h(this,{type:i,target:e,state:n(e),kind:t,last:void 0})}),(function(){var e=a(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},"6d61":function(e,t,r){"use strict";var i=r("23e7"),n=r("da84"),a=r("94ca"),s=r("6eeb"),c=r("f183"),o=r("2266"),u=r("19aa"),l=r("861d"),f=r("d039"),p=r("1c7e"),d=r("d44e"),h=r("7156");e.exports=function(e,t,r){var v=-1!==e.indexOf("Map"),g=-1!==e.indexOf("Weak"),m=v?"set":"add",y=n[e],E=y&&y.prototype,T=y,b={},k=function(e){var t=E[e];s(E,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return g&&!l(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(g&&!l(e))&&t.call(this,0===e?0:e)}:function(e,r){return t.call(this,0===e?0:e,r),this})},R=a(e,"function"!=typeof y||!(g||E.forEach&&!f((function(){(new y).entries().next()}))));if(R)T=r.getConstructor(t,e,v,m),c.REQUIRED=!0;else if(a(e,!0)){var _=new T,O=_[m](g?{}:-0,1)!=_,x=f((function(){_.has(1)})),I=p((function(e){new y(e)})),A=!g&&f((function(){var e=new y,t=5;while(t--)e[m](t,t);return!e.has(-0)}));I||(T=t((function(t,r){u(t,T,e);var i=h(new y,t,T);return void 0!=r&&o(r,i[m],{that:i,AS_ENTRIES:v}),i})),T.prototype=E,E.constructor=T),(x||A)&&(k("delete"),k("has"),v&&k("get")),(A||O)&&k(m),g&&E.clear&&delete E.clear}return b[e]=T,i({global:!0,forced:T!=y},b),d(T,e),g||r.setStrong(T,e,v),T}},7156:function(e,t,r){var i=r("861d"),n=r("d2bb");e.exports=function(e,t,r){var a,s;return n&&"function"==typeof(a=t.constructor)&&a!==r&&i(s=a.prototype)&&s!==r.prototype&&n(e,s),e}},"99af":function(e,t,r){"use strict";var i=r("23e7"),n=r("d039"),a=r("e8b5"),s=r("861d"),c=r("7b0b"),o=r("50c4"),u=r("8418"),l=r("65f0"),f=r("1dde"),p=r("b622"),d=r("2d00"),h=p("isConcatSpreadable"),v=9007199254740991,g="Maximum allowed index exceeded",m=d>=51||!n((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),y=f("concat"),E=function(e){if(!s(e))return!1;var t=e[h];return void 0!==t?!!t:a(e)},T=!m||!y;i({target:"Array",proto:!0,forced:T},{concat:function(e){var t,r,i,n,a,s=c(this),f=l(s,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?s:arguments[t],E(a)){if(n=o(a.length),p+n>v)throw TypeError(g);for(r=0;r<n;r++,p++)r in a&&u(f,p,a[r])}else{if(p>=v)throw TypeError(g);u(f,p++,a)}return f.length=p,f}})},"9e6d":function(e,t,r){},a15b:function(e,t,r){"use strict";var i=r("23e7"),n=r("44ad"),a=r("fc6a"),s=r("a640"),c=[].join,o=n!=Object,u=s("join",",");i({target:"Array",proto:!0,forced:o||!u},{join:function(e){return c.call(a(this),void 0===e?",":e)}})},a640:function(e,t,r){"use strict";var i=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&i((function(){r.call(null,t||function(){throw 1},1)}))}},a9e3:function(e,t,r){"use strict";var i=r("83ab"),n=r("da84"),a=r("94ca"),s=r("6eeb"),c=r("5135"),o=r("c6b6"),u=r("7156"),l=r("c04e"),f=r("d039"),p=r("7c73"),d=r("241c").f,h=r("06cf").f,v=r("9bf2").f,g=r("58a8").trim,m="Number",y=n[m],E=y.prototype,T=o(p(E))==m,b=function(e){var t,r,i,n,a,s,c,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+u}for(a=u.slice(2),s=a.length,c=0;c<s;c++)if(o=a.charCodeAt(c),o<48||o>n)return NaN;return parseInt(a,i)}return+u};if(a(m,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var k,R=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof R&&(T?f((function(){E.valueOf.call(r)})):o(r)!=m)?u(new y(b(t)),r,R):b(t)},_=i?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;_.length>O;O++)c(y,k=_[O])&&!c(R,k)&&v(R,k,h(y,k));R.prototype=E,E.constructor=R,s(n,m,R)}},ab13:function(e,t,r){var i=r("b622"),n=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(i){}}return!1}},b64b:function(e,t,r){var i=r("23e7"),n=r("7b0b"),a=r("df75"),s=r("d039"),c=s((function(){a(1)}));i({target:"Object",stat:!0,forced:c},{keys:function(e){return a(n(e))}})},bb2f:function(e,t,r){var i=r("d039");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},caad:function(e,t,r){"use strict";var i=r("23e7"),n=r("4d64").includes,a=r("44d2");i({target:"Array",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")},cc5e:function(e,t,r){"use strict";r("9e6d")},dbb4:function(e,t,r){var i=r("23e7"),n=r("83ab"),a=r("56ef"),s=r("fc6a"),c=r("06cf"),o=r("8418");i({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,r,i=s(e),n=c.f,u=a(i),l={},f=0;while(u.length>f)r=n(i,t=u[f++]),void 0!==r&&o(l,t,r);return l}})},e439:function(e,t,r){var i=r("23e7"),n=r("d039"),a=r("fc6a"),s=r("06cf").f,c=r("83ab"),o=n((function(){s(1)})),u=!c||o;i({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(a(e),t)}})},e997:function(e,t,r){},f183:function(e,t,r){var i=r("d012"),n=r("861d"),a=r("5135"),s=r("9bf2").f,c=r("90e3"),o=r("bb2f"),u=c("meta"),l=0,f=Object.isExtensible||function(){return!0},p=function(e){s(e,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,u)){if(!f(e))return"F";if(!t)return"E";p(e)}return e[u].objectID},h=function(e,t){if(!a(e,u)){if(!f(e))return!0;if(!t)return!1;p(e)}return e[u].weakData},v=function(e){return o&&g.REQUIRED&&f(e)&&!a(e,u)&&p(e),e},g=e.exports={REQUIRED:!1,fastKey:d,getWeakData:h,onFreeze:v};i[u]=!0}}]);
//# sourceMappingURL=chunk-10a74914.0028bbe0.js.map