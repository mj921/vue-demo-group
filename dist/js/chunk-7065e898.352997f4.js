(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7065e898"],{"34e5":function(t,e,r){"use strict";r("e99f")},"7db0":function(t,e,r){"use strict";var n=r("23e7"),i=r("b727").find,s=r("44d2"),c="find",o=!0;c in[]&&Array(1)[c]((function(){o=!1})),n({target:"Array",proto:!0,forced:o},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),s(c)},"81d5":function(t,e,r){"use strict";var n=r("7b0b"),i=r("23cb"),s=r("50c4");t.exports=function(t){var e=n(this),r=s(e.length),c=arguments.length,o=i(c>1?arguments[1]:void 0,r),u=c>2?arguments[2]:void 0,a=void 0===u?r:i(u,r);while(a>o)e[o++]=t;return e}},cb29:function(t,e,r){var n=r("23e7"),i=r("81d5"),s=r("44d2");n({target:"Array",proto:!0},{fill:i}),s("fill")},e99f:function(t,e,r){},f75a:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cy-pinyin"},[r("div",[r("button",{on:{click:t.reset}},[t._v("重新开始")]),t.finish?r("span",[t._v(t._s(t.cy))]):t._e(),t._l(t.scoreKeys,(function(e){return r("span",{key:"show-"+e.key},[t._v(t._s(e.title)+"："+t._s(e.getScore?e.getScore(t.score[e.key]):t.score[e.key]))])})),r("button",{on:{click:function(e){t.rankVisible=!0}}},[t._v("排行")])],2),r("div",{staticClass:"cy-input"},t._l(t.inputList,(function(e,n){return r("dl",{key:"row-"+n,staticClass:"cy-row"},t._l(e,(function(e,i){return r("div",{key:"block-"+n+"-"+i,staticClass:"cy-block",class:{error:!e.valid}},t._l(e.content,(function(e,s){return r("dd",{key:"cell-"+n+"-"+i+"-"+s,staticClass:"cy-cell",class:"cy-cell-"+e.validResult},[t._v(" "+t._s(e.text)+" ")])})),0)})),0)})),0),r("div",{staticClass:"keyboard"},t._l(t.keyList,(function(e,n){return r("dl",{key:"key-row-"+n,staticClass:"key-row"},t._l(e,(function(e){return r("dd",{key:"key-cell-"+e,staticClass:"key-cell",class:"key-cell-"+(t.keyMap[e]||""),on:{click:function(r){return t.keyInput(e)}}},[t._v(" "+t._s(e)+" ")])})),0)})),0),r("el-dialog",{staticClass:"rank-dialog",attrs:{title:"排行",visible:t.rankVisible,width:"600px"},on:{"update:visible":function(e){t.rankVisible=e}}},[r("el-tabs",t._l(t.scoreKeys,(function(e){return r("el-tab-pane",{key:e.key,attrs:{label:e.title}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("top")])]),r("ul",t._l(t.history[e.key].top,(function(n){return r("li",{key:e.key+"-top-"+n.score},[t._v(" "+t._s(n.score)+" "+t._s(n.cy.join("，"))+" ")])})),0)])],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("bottom")])]),r("ul",t._l(t.history[e.key].bottom,(function(n){return r("li",{key:e.key+"-bottom-"+n.score},[t._v(" "+t._s(n.score)+" "+t._s(n.cy.join("，"))+" ")])})),0)])],1)],1)],1)})),1)],1)],1)},i=[],s=(r("13d5"),r("99af"),r("159b"),r("b64b"),r("d81d"),r("cb29"),r("fb6a"),r("4d63"),r("ac1f"),r("25f0"),r("a15b"),r("caad"),r("2532"),r("7db0"),r("d958")),c=r.n(s),o=r("0819"),u=o.reduce((function(t,e){return 1===e.type?t.concat([e.data]):t}),[]),a={data:function(){var t=this,e=localStorage.getItem("cyHistory"),r={score1:{top:[],bottom:[]},score2:{top:[],bottom:[]},num:0};if(e)try{r=JSON.parse(e)}catch(n){r={score1:{top:[],bottom:[]},score2:{top:[],bottom:[]},num:0}}return{cy:"",cyPinYin:[],inputList:[],keyList:[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L"],["Enter","Z","X","C","V","B","N","M","⌫"]],currRow:"",cyPinYinStr:"",currRowIndex:0,currBlockIndex:0,currCellIndex:0,keyMap:{},history:r,scoreKeys:[{key:"score1",title:"按行分数",getScore:function(e){return t.finish||Object.keys(t.keyMap).forEach((function(r){"error"===t.keyMap[r]&&(e-=t.errorScore)})),e}},{key:"score2",title:"按字母分数"}],score:{score1:100,score2:100},rowScore:10,rowErrorScore:2,errorScore:2,warnScore:1,rankNum:50,rankVisible:!1,finish:!1}},methods:{getChengyu:function(){return u[Math.floor(u.length*Math.random())]},reset:function(){var t=this;this.cy=this.getChengyu(),this.cyPinYin=c()(this.cy,{style:c.a.STYLE_NORMAL}),this.cyPinYinStr=this.cyPinYin.reduce((function(t,e){return t+e[0]}),"").toUpperCase(),this.inputList=Array(6).fill(1).map((function(){return t.cyPinYin.map((function(t){return{valid:!0,content:Array(t[0].length).fill(1).map((function(){return{text:"",validResult:""}}))}}))})),this.currRowIndex=0,this.currBlockIndex=0,this.currCellIndex=0,this.currRow="",this.keyMap={},this.finish=!1,this.score={score1:100,score2:100}},keyInput:function(t){this.currRowIndex>=6||this.finish||("Enter"===t?this.currRow.length===this.cyPinYinStr.length&&this.validate():"⌫"===t?this.currRow&&(this.currRow=this.currRow.slice(0,-1),0===this.currCellIndex?(this.currBlockIndex--,this.currCellIndex=this.inputList[this.currRowIndex][this.currBlockIndex].content.length-1):this.currCellIndex--,this.inputList[this.currRowIndex][this.currBlockIndex].content[this.currCellIndex].text=""):this.currRow.length<this.cyPinYinStr.length&&(this.currRow+=t,this.inputList[this.currRowIndex][this.currBlockIndex].content[this.currCellIndex].text=t,this.inputList[this.currRowIndex][this.currBlockIndex].content.length-1>this.currCellIndex?this.currCellIndex++:this.inputList[this.currRowIndex].length-1>this.currBlockIndex?(this.currCellIndex=0,this.currBlockIndex++):this.currCellIndex++))},checkPy:function(t){var e=["b","c","ch","d","f","g","h","j","k","l","m","n","p","q","r","s","sh","t","w","x","y","z","zh"],r=["ong","ing","eng","ang","vn","un","in","en","an","er","ve","ia","ie","iu","ou","ao","ui","ei","ai","u","i","e","o","a","ang","uang","uan","an","ao","ai","en","er","ou","a","o","e","uo","ua","ue","iao","ian","iang","iong","v"];return new RegExp("^(".concat(e.join("|"),")?(").concat(r.join("|"),")?$")).test(t.toLowerCase())},validate:function(){var t=this;if(this.inputList[this.currRowIndex].forEach((function(e){e.valid=t.checkPy(e.content.map((function(t){return t.text})).join(""))})),this.inputList[this.currRowIndex].every((function(t){return t.valid}))){for(var e=0,r=0,n=0,i=0;r<this.currRow.length;r++){var s=this.currRow[r];s===this.cyPinYinStr[r]?(this.inputList[this.currRowIndex][n].content[i].validResult="pass",this.keyMap[s]="pass",e++):this.cyPinYinStr.includes(s)?(this.inputList[this.currRowIndex][n].content[i].validResult="has",this.score.score2-=this.warnScore,"pass"!==this.keyMap[s]&&(this.keyMap[s]="has")):(this.inputList[this.currRowIndex][n].content[i].validResult="error",this.score.score2-=this.errorScore,this.keyMap[s]||(this.keyMap[s]="error")),this.inputList[this.currRowIndex][n].content.length-1>i?i++:this.inputList[this.currRowIndex].length-1>n&&(i=0,n++)}if(e===this.cyPinYinStr.length&&(this.finish=!0,this.$nextTick((function(){alert("答对了，".concat(t.cy))}))),this.finish){for(var c in this.keyMap)"error"===this.keyMap[c]&&(this.score.score1-=this.rowErrorScore);this.saveScore()}else this.score.score1-=this.rowScore;this.currRowIndex++,this.currBlockIndex=0,this.currCellIndex=0,this.currRow="",this.currRowIndex>=6&&!this.finish&&(this.finish=!0,this.score.score1=this.score.score2=0,this.$nextTick((function(){alert("答错了，".concat(t.cy))})))}},saveScore:function(){var t=this;this.scoreKeys.forEach((function(e){var r,n=e.key,i=t.history[n];(r=i.top.find((function(e){return e.score===t.score[n]})))?r.cy.includes(t.cy)||r.cy.push(t.cy):i.top.length<t.rankNum||i.top[i.top.length-1].score<t.score[n]?(i.top.push({score:t.score[n],cy:[t.cy]}),i.top.sort((function(t,e){return e.score-t.score})),i.top.slice(0,t.rankNum)):i.top[i.top.length-1].score!==t.score[n]||i.top[i.top.length-1].cy.includes(t.cy)||i.top[i.top.length-1].cy.push(t.cy),(r=i.bottom.find((function(e){return e.score===t.score[n]})))?r.cy.includes(t.cy)||r.cy.push(t.cy):i.bottom.length<t.rankNum||i.bottom[i.bottom.length-1].score>t.score[n]?(i.bottom.push({score:t.score[n],cy:[t.cy]}),i.bottom.sort((function(t,e){return t.score-e.score})),i.bottom.slice(0,t.rankNum)):i.bottom[i.top.length-1].score!==t.score[n]||i.bottom[i.top.length-1].cy.includes(t.cy)||i.bottom[i.top.length-1].cy.push(t.cy)})),this.history.num++,localStorage.setItem("cyHistory",JSON.stringify(this.history))}},created:function(){this.reset()},mounted:function(){var t=this;document.addEventListener("keyup",(function(e){/^[a-z]$/.test(e.key)?t.keyInput(e.key.toUpperCase()):"Backspace"===e.key?t.keyInput("⌫"):"Enter"===e.key&&t.keyInput("Enter")}))}},l=a,h=(r("34e5"),r("2877")),y=Object(h["a"])(l,n,i,!1,null,"776e0e09",null);e["default"]=y.exports}}]);
//# sourceMappingURL=chunk-7065e898.352997f4.js.map